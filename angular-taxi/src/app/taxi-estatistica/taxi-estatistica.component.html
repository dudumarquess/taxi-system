<div class="estatistica-container">
  <h2>Estatísticas do Táxi</h2>
  <div class="filtros">
    <label>Início:
      <input type="date" [(ngModel)]="dataInicio">
    </label>
    <label>Fim:
      <input type="date" [(ngModel)]="dataFim">
    </label>
    <button (click)="buscarEstatisticas()">Buscar</button>
  </div>

  <div *ngIf="estatisticas">
    <h3>Período: {{dataInicio}} a {{dataFim}}</h3>
    <ul>
      <li>
        Total de viagens: {{estatisticas.viagens}}
        <button (click)="onMostrarSubtotaisViagens()">Viagens por motorista</button>
      </li>
      <li>
        Total de horas: {{estatisticas.horas}}
        <button (click)="onMostrarSubtotaisHoras()">Horas por motorista</button>
      </li>
      <li>
        Total de quilómetros: {{estatisticas.quilometros}}
        <button (click)="onMostrarSubtotaisKm()">Quilometros por motorista</button>
      </li>
    </ul>
  </div>

  <div *ngIf="mostrarSubtotaisViagens">
    <h4>Viagens por motorista</h4>
    <ul>
      <li *ngFor="let s of subtotaisViagens">
        {{s.nome}}: {{s.viagens}} viagens
      </li>
    </ul>
    <button (click)="mostrarSubtotaisViagens = false">Fechar</button>
  </div>

  <div *ngIf="mostrarSubtotais">
    <h4>Horas por motorista</h4>
    <ul>
      <li *ngFor="let s of subtotais">
        {{s.nome}}: {{s.horas}} horas
      </li>
    </ul>
    <button (click)="mostrarSubtotais = false">Fechar</button>
  </div>

  <div *ngIf="mostrarSubtotaisKm">
    <h4>Quilómetros por motorista</h4>
    <ul>
      <li *ngFor="let s of subtotaisKm">
        {{s.nome}}: {{s.quilometros}} km
      </li>
    </ul>
    <button (click)="mostrarSubtotaisKm = false">Fechar</button>
  </div>

  <div *ngIf="erro" class="erro">{{erro}}</div>
</div>